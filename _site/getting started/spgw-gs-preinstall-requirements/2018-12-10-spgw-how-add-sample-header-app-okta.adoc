= Add a Sample App with Okta
:page-layout: post
:page-category: Tutorials

== Introduction

The purpose of this tutorial is to walk through the process of setting up a sample header application with Okta through the SPGateway Admin Console.

[NOTE]
====
The following is required:

* Admin login for SPGateway Admin console.
* SPGateway appliance configured with Okta tenant.
* Access to and ability to modify local hosts file.
====

== Create the Application in SPGateway

include::{docdir}/./fragments/frag-add-and-test-sample-header-app.adoc[]

.  Select the *SPGW Sample Header App* option from the left column menu, and click *Create*.
+
image::spgateway-sample-header-app-okta-05.png[]
+
image::spgateway-sample-header-app-okta-06.png[]

== Configure the Header Application Settings

. Click *Next*.

NOTE: The Settings page provides options with which to further configure the application. For more information on the application setting options, http://support.icsynergy.com/knowledge-base/application-settings[Application Settings].

image::spgateway-sample-header-app-okta-07.png[]

== Configure the Header Application Attributes
. Click *Next*.

NOTE: The Attributes page provides a list of attributes that will be passed into the application. This page also provides the ability to add, edit, or remove any attribute. For more information on the attribute options, see http://support.icsynergy.com/knowledge-base/application-attributes/[Application Attributes].

image::spgateway-sample-header-app-okta-08.png[]

== Add a Custom Attribute to Okta

. In a new tab, navigate to your *Okta Org*, log in as an administrator, and click *Admin*.
. Navigate to the *Directory -> Profile Editor* Section.
+
image::spgateway-sample-header-app-okta-10.png[]
+

TIP: You can hover over the main tabs in the Okta admin console to reveal the flyout sub-menus.

+
. Click *Profile* in the *Actions* column.
+
image::spgateway-sample-header-app-okta-11.png[]
+
. Click *+ Add Attribute* to add a custom attribute that will be used to send header information through the *Sample Header Application*.
+
image::spgateway-sample-header-app-okta-12.png[]
+
. Enter *Gender* for the *Display name* and *gender* for the *Variable name*.
. Click *Save*.
+
image::spgateway-sample-header-app-okta-13.png[]
+
. Click *Directory -> People*.
+
image::spgateway-sample-header-app-okta-14.png[]
+
. Select your account under the *Person & Username* column.
+
image::spgateway-sample-header-app-okta-15.png[]
+
. Click the *Profile* tab, and click *Edit*.
+
image::spgateway-sample-header-app-okta-16.png[]
+
. Scroll down to the *Gender* attribute, and enter a corresponding value.
+
image::spgateway-sample-header-app-okta-17.png[]
+
. Click *Save*.

== Complete the Header Application Configuration

. Return to the *SPGateway Admin Console*.
. In the *Attributes* section, hover over the *+* button and click *Session*.
+
image::spgateway-sample-header-app-okta-18.png[]
+
. Scroll down to the *Add new Session Attribute* window.
. In the *Name* field, enter *gender*, and select the *gender* attribute type in the *Value* field.
. Click *Okay*.
+
image::spgateway-sample-header-app-okta-19.png[]
+

TIP: In the Value menu, type in the name of the attribute you want to add, and then click the new attribute in the dropdown menu.

+
. Click *Next*.
+
image::spgateway-sample-header-app-okta-08.png[]
+
. Click *Done*.
+
image::spgateway-sample-header-app-okta-20.png[]
+
. Confirm that the *Sample Header App* is displayed as *Active* in the *Protected Applications* list.
. Click the *Goto App* icon.
+
image::spgateway-sample-header-app-okta-21.png[]
+

WARNING: Ensure that the Public Domain defined in the Configure the Header Application Settings is added to local host file or DNS Server pointing to the VM running SPGateway.

+
----
<ip address>     <app public domain>
xxx.xxx.xxx.xxx  header.icsynergy.info
----

== Test the Sample Header Application

. Select *IDP Initiated* from the dropdown menu to verify the application is working.
+
image::spgateway-sample-header-app-okta-22.png[]
+

NOTE: If you do not already have an active session for Okta open in your browser, you may be prompted to log in to your Okta account and provide your credentials.

+
. In the application page, review and verify that the *Sample Header App* sent to Okta match your profile information.
+
image::spgateway-sample-header-app-okta-23.png[]
